(this.webpackJsonpplanktonics=this.webpackJsonpplanktonics||[]).push([[0],{106:function(e,s,a){e.exports={button:"Button_button__1mfu5"}},107:function(e,s,a){e.exports={avatar:"AvatarImage_avatar__1m-yB"}},109:function(e,s,a){e.exports={contentWrapper:"Content_contentWrapper__2m7iD"}},111:function(e,s,a){e.exports={messagesWrapper:"Messages_messagesWrapper__3L23k"}},114:function(e,s,a){e.exports={chatsList:"ChatsList_chatsList__1IGGo"}},124:function(e,s,a){},19:function(e,s,a){e.exports={myMessageWrapper:"MyMessage_myMessageWrapper__2MLkt",myMessageWrapper__message_deleted:"MyMessage_myMessageWrapper__message_deleted__2iFI6",myMessageWrapper__message:"MyMessage_myMessageWrapper__message__3B7-A",myMessageWrapper__editWrapper:"MyMessage_myMessageWrapper__editWrapper__1waO_",myMessageWrapper__editWrapper_edit:"MyMessage_myMessageWrapper__editWrapper_edit__3wJBQ",myMessageWrapper__editWrapper_delete:"MyMessage_myMessageWrapper__editWrapper_delete__1j6JM",_editMode:"MyMessage__editMode__iZntV"}},228:function(e,s,a){"use strict";a.r(s);var t=a(0),r=a.n(t),n=a(49),c=a.n(n),i=(a(124),a(52)),d=a.n(i),o=a(32),m=a(53),_=a.n(m),g=a(75),l=a.n(g),p=a(21),u=a(5),j=a(106),h=a.n(j),b=a(1),O=function(e){return Object(b.jsx)("button",Object(u.a)(Object(u.a)({},e),{},{className:h.a.button,children:e.text}))},I=a(107),f=a.n(I),v=function(e){var s=e.link;return Object(b.jsx)("div",{className:f.a.avatar,children:Object(b.jsx)("img",{src:""===s?"https://banner2.cleanpng.com/20181130/zlz/kisspng-portable-network-graphics-avatar-computer-icons-im-ui-icon-icon-5c0174b58a31f3.0460868615435992855661.jpg":s,alt:"avatar"})})},x=function(e){var s=e.isAuth,a=e.login,t=e.setUserData;return s?Object(b.jsxs)("div",{className:l.a.authInfoBar,children:[Object(b.jsxs)("div",{className:l.a.authUser,children:[Object(b.jsx)(v,{link:""})," ",a]}),Object(b.jsx)(p.b,{to:"",onClick:function(){return t(null,null,null,!1,!1)},children:Object(b.jsx)(O,{text:"Logout"})})]}):Object(b.jsx)(p.b,{to:"",children:Object(b.jsx)(O,{text:"Login"})})},M=function(e){var s=e.isAuth,a=(e.id,e.login),t=Object(o.a)(e,["isAuth","id","login"]);return Object(b.jsxs)("div",{className:_.a.header,children:[Object(b.jsx)("div",{className:_.a.header__logo,children:"Planktonics"}),Object(b.jsx)("div",{className:_.a.header__authInfo,children:Object(b.jsx)(x,{isAuth:s,login:a,setUserData:t.setUserData})})]})},W=a(10),N="SET_USER_DATA",y={id:null,email:null,login:null,isAuth:!1,rememberMe:!1};null!==localStorage.getItem("authState")&&(y=Object(u.a)({},JSON.parse(localStorage.getItem("authState"))));var w=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return{type:N,payload:{id:e,email:s,login:a,isAuth:t,rememberMe:r}}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case N:return localStorage.setItem("authState",JSON.stringify(s.payload)),Object(u.a)(Object(u.a)({},e),s.payload);default:return e}},S=Object(W.b)((function(e){return{id:e.auth.id,login:e.auth.login,isAuth:e.auth.isAuth}}),{setUserData:w})(M),A=a(109),C=a.n(A),L=a(8),D=a(83),E=a(79),k=a.n(E),U=a(80),T=a.n(U),B=a(230),J=a(229),H=a(33),R=a.n(H),V=function(e){var s=e.input,a=e.meta,t=a.touched,r=a.error,n=Object(o.a)(e,["input","meta"]),c=r&&t;return Object(b.jsxs)("div",{className:R.a.wrapperInput,children:[Object(b.jsx)("div",{className:R.a.wrapperInput__formControlsInput+" "+(c?R.a.error:""),children:Object(b.jsx)("input",Object(u.a)(Object(u.a)(Object(u.a)({},s),n),{},{className:R.a.fieldInput}))}),c&&Object(b.jsx)("span",{className:R.a.error,children:r})]})},G=function(e){return e?void 0:"Field is required!"},P=function(e){return function(s){return s&&s.length>e?"Max length ".concat(e," symbols"):void 0}},Q=P(30),q=Object(J.a)({form:"login"})((function(e){var s=e.handleSubmit,a=e.error;return Object(b.jsxs)("form",{onSubmit:s,children:[Object(b.jsx)("div",{className:T.a._error,children:a&&a}),Object(b.jsx)(B.a,{placeholder:"Login or email",name:"email",component:V,validate:[G,Q]}),Object(b.jsx)(B.a,{placeholder:"Password",type:"password",name:"password",component:V,validate:[G,Q]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(B.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me",Object(b.jsx)("div",{className:T.a.loginButton,children:Object(b.jsx)(O,{text:"Login"})})]})]})})),Z=function(e){var s=e.isAuth,a=e.onSubmit,t=e.maxLength30;return s?Object(b.jsx)(L.a,{to:"/chats/1"}):Object(b.jsxs)("div",{className:k.a.loginFormWrapper,children:[Object(b.jsx)("div",{className:k.a.loginFormWrapper__formName,children:"Log In"}),Object(b.jsx)(q,{onSubmit:a,maxLength30:t})]})},K=Object(W.b)((function(e){return{isAuth:e.auth.isAuth}}),{setUserData:w})((function(e){var s=8461,a="test@gmail.com",t="VasiaPupkin",r="qwer1234";return Object(b.jsx)(Z,Object(u.a)(Object(u.a)({},e),{},{onSubmit:function(n){var c=n.email,i=n.password,d=n.rememberMe;if(c!==a||i!==r)throw new D.a({_error:"Login or password failed!!!"});e.setUserData(s,a,t,!0,d)}}))})),X=a(55),z=a.n(X),Y=a(118),$=a(117),ee="ADD_MESSAGE",se="EDIT_MESSAGE",ae="SET_MESSAGE_EDIT_MOD",te="CHANGE_CHAT",re="SET_ACTIVE_MESSAGE",ne={chatsList:{activeChatId:1,chats:[{name:"WorksChat",id:1,avaUrl:"",mediaFiles:[{}]},{name:"flood",id:2,avaUrl:"",mediaFiles:[{}]}]},users:[{userId:21,name:"Andrey",avaUrl:"",mediaFiles:[{}]},{userId:22,name:"Kate",avaUrl:"",mediaFiles:[{}]},{userId:23,name:"Helen",avaUrl:"",mediaFiles:[{}]},{userId:24,name:"Anna",avaUrl:"",mediaFiles:[{}]},{userId:25,name:"Denis",avaUrl:"",mediaFiles:[{}]},{userId:26,name:"Daniil",avaUrl:"",mediaFiles:[{}]},{userId:27,name:"Sergey",avaUrl:"",mediaFiles:[{}]}],editMessageId:0,activeMessageField:"",messages:[{chatId:1,userId:21,message:"Hi!",messageId:1},{chatId:1,userId:21,message:"How are you?",messageId:2},{chatId:2,userId:23,message:"WTF!!!",messageId:3},{chatId:2,userId:23,message:"Sorry",messageId:4},{chatId:1,userId:25,message:"Not for you",messageId:5},{chatId:2,userId:26,message:"I am Helga.",messageId:6},{chatId:2,userId:27,message:"I am fine.",messageId:7},{chatId:1,userId:21,message:"Hi!",messageId:8},{chatId:1,userId:22,message:"How are you?",messageId:9},{chatId:2,userId:22,message:"WTF!!!",messageId:10},{chatId:2,userId:24,message:"Sorry",messageId:11},{chatId:1,userId:24,message:"Not for you",messageId:12},{chatId:2,userId:26,message:"I am Helga.",messageId:13},{chatId:2,userId:27,message:"I am fine.",messageId:14}]};null!==localStorage.getItem("messagesState")&&(ne=Object(u.a)({},JSON.parse(localStorage.getItem("messagesState"))));var ce=function(e,s){return{type:se,message:e,messageId:s}},ie=function(e){return{type:ae,editMessageId:e}},de=function(e){return{type:re,message:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,s=arguments.length>1?arguments[1]:void 0,a=Object(u.a)({},e);switch(s.type){case te:return a.chatsList=Object(u.a)(Object(u.a)({},e.chatsList),{},{activeChatId:s.chatId}),a;case ee:return a.messages=[].concat(Object($.a)(e.messages),[{chatId:s.chatId,userId:s.userId,message:s.message,messageId:e.messages.length+1}]),localStorage.setItem("messagesState",JSON.stringify(a)),a;case se:return a.messages=a.messages.map((function(e){return e.messageId===s.messageId?Object(u.a)(Object(u.a)({},e),{},{message:s.message}):e})),localStorage.setItem("messagesState",JSON.stringify(a)),a;case ae:return a=Object(u.a)(Object(u.a)({},e),{},{editMessageId:s.editMessageId}),localStorage.setItem("messagesState",JSON.stringify(a)),a;case re:return a=Object(u.a)(Object(u.a)({},e),{},{activeMessageField:s.message}),localStorage.setItem("messagesState",JSON.stringify(a)),a;default:return a}},me=a(26),_e=a.n(me),ge=function(e){var s=e.hasError,a=e.onSubmit,t=e.textareaRef,r=e.validation,n=e.activeMessageField,c=e.editMessageId;return Object(b.jsxs)("div",{className:_e.a.newMessageWrapper,children:[Object(b.jsxs)("div",{className:_e.a.newMessageWrapper__newMessageField+" "+(0!==c?_e.a._edit:"")+" "+(s?_e.a.error:""),children:[Object(b.jsx)("textarea",{className:_e.a._fieldTextarea,autoFocus:!0,name:"message",placeholder:"Input your message...",onChange:function(){return r(t.current.value)},ref:t,value:n}),s&&Object(b.jsx)("span",{className:_e.a._error,children:s})]}),s?Object(b.jsx)("div",{children:Object(b.jsx)(O,{disabled:"disabled",text:"send"})}):Object(b.jsx)("div",{onClick:function(){return a(n)},children:Object(b.jsx)(O,{text:"send"})})]})},le=P(150),pe=r.a.forwardRef((function(e,s){var a=r.a.useState(!1),t=Object(Y.a)(a,2),n=t[0],c=t[1],i=r.a.useRef(null);return Object(b.jsx)(ge,Object(u.a)(Object(u.a)({},e),{},{validation:function(s){c(void 0!==le(s)&&le(s)),e.setActiveMessage(s)},onSubmit:function(s){""!==s&&(0===e.editMessageId?e.addMessage(s,e.chatId,e.userId):e.editMessage(s,e.editMessageId)),e.setActiveMessage(""),e.setMessageEditMode(0)},textareaRef:i,hasError:n}))})),ue=Object(W.b)((function(e){return{userId:e.auth.id,chatId:e.messagesData.chatsList.activeChatId,editMessageId:e.messagesData.editMessageId,activeMessageField:e.messagesData.activeMessageField}}),{addMessage:function(e,s,a){return{type:ee,message:e,chatId:s,userId:a}},setMessageEditMode:ie,editMessage:ce,setActiveMessage:de})(pe),je=a(111),he=a.n(je),be=function(e){var s=e.messagesMap;return Object(t.useEffect)((function(){var e=document.getElementById("messagesWrapper");e.scrollTop=e.scrollHeight}),[s]),Object(b.jsx)("div",{className:he.a.messagesWrapper,id:"messagesWrapper",children:s})},Oe=a(19),Ie=a.n(Oe),fe=function(e){var s=e.message,a=e.messageId,t=e.editMessage,r=e.editMessageId,n=e.setMessageEditMode,c=e.setActiveMessage;return Object(b.jsx)("div",{className:Ie.a.myMessageWrapper,children:""===s?Object(b.jsx)("div",{className:"".concat(Ie.a.myMessageWrapper__message," ").concat(Ie.a.myMessageWrapper__message_deleted),children:"Message deleted"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"".concat(Ie.a.myMessageWrapper__message,"  ").concat(r===a&&Ie.a._editMode),children:s}),r!==a&&Object(b.jsxs)("div",{className:Ie.a.myMessageWrapper__editWrapper,children:[Object(b.jsx)("span",{className:Ie.a.myMessageWrapper__editWrapper_edit,onClick:function(){n(a),c(s)},children:"edit"}),Object(b.jsx)("span",{className:Ie.a.myMessageWrapper__editWrapper_delete,onClick:function(){t("",a)},children:"delete"})]})]})})},ve=Object(W.b)((function(e){return{editMessageId:e.messagesData.editMessageId}}),{editMessage:ce,setMessageEditMode:ie,setActiveMessage:de})(fe),xe=a(27),Me=a.n(xe),We=function(e){var s=e.message,a=e.user;return Object(b.jsxs)("div",{className:Me.a.messageWrapper,children:[Object(b.jsx)("div",{className:Me.a.messageWrapper__avatar,children:Object(b.jsx)(v,{link:a.avaUrl})}),Object(b.jsx)("div",{className:Me.a.messageWrapper__name,children:a.name}),""===s?Object(b.jsx)("div",{className:"".concat(Me.a.messageWrapper__message_deleted," ").concat(Me.a.messageWrapper__message),children:"Message deleted"}):Object(b.jsx)("div",{className:Me.a.messageWrapper__message,children:s})]})},Ne=Object(W.b)((function(e){return{messages:e.messagesData.messages,chatId:e.messagesData.chatsList.activeChatId,userId:e.auth.id,users:e.messagesData.users}}),{})((function(e){var s=e.chatId,a=Object(o.a)(e,["chatId"]),t=a.messages.map((function(e,t){return e.chatId===s?a.userId===e.userId?Object(b.jsx)(ve,{messageId:e.messageId,message:e.message},t):function(){var s=a.users.map((function(s){return e.userId===s.userId})).indexOf(!0),r=a.users[s];return Object(b.jsx)(We,{message:e.message,user:r},t)}():""}));return Object(b.jsx)(be,{messagesMap:t})})),ye=function(){return Object(b.jsxs)("div",{className:z.a.messagesField,children:[Object(b.jsx)("div",{className:z.a.messagesField__messages,children:Object(b.jsx)(Ne,{})}),Object(b.jsx)("div",{className:z.a.messagesField__newMessage,children:Object(b.jsx)(ue,{})})]})},we=a(56),Fe=a.n(we),Se=a(9),Ae=a(112),Ce=a(113),Le=a(119),De=a(116),Ee=function(e){return{isAuth:e.auth.isAuth}},ke=a(114),Ue=a.n(ke),Te=function(e){var s=e.chatsMap;return Object(b.jsx)("div",{className:Ue.a.chatsList,children:s})},Be=a(57),Je=a.n(Be),He=function(e){var s=e.id,a=e.name,t=e.changeChat;return Object(b.jsx)("div",{className:Je.a.chatItem,children:Object(b.jsx)(p.b,{className:Je.a.chatItem__link,activeClassName:Je.a.active,to:"/chats/"+s,onClick:function(){return t(s)},children:a})})},Re=Object(W.b)((function(e){return{chats:e.messagesData.chatsList.chats}}),{changeChat:function(e){return{type:te,chatId:e}}})((function(e){var s=e.chats.map((function(s){return Object(b.jsx)(He,{changeChat:e.changeChat,name:s.name,id:s.id},s.id)}));return Object(b.jsx)(Te,{chatsMap:s})})),Ve=Object(Se.d)((function(e){var s=function(s){Object(Le.a)(t,s);var a=Object(De.a)(t);function t(){return Object(Ae.a)(this,t),a.apply(this,arguments)}return Object(Ce.a)(t,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(e,Object(u.a)({},this.props)):Object(b.jsx)(L.a,{to:""})}}]),t}(r.a.Component);return Object(W.b)(Ee)(s)}))((function(){return Object(b.jsxs)("div",{className:Fe.a.wrapper,children:[Object(b.jsx)("div",{className:Fe.a.wrapper_navigationList,children:Object(b.jsx)(Re,{})}),Object(b.jsx)("div",{className:Fe.a.wrapper_messagesField,children:Object(b.jsx)(ye,{})})]})})),Ge=function(){return Object(b.jsxs)("div",{className:C.a.contentWrapper,children:[Object(b.jsx)(L.b,{path:"/chats/:id",render:function(){return Object(b.jsx)(Ve,{})}}),Object(b.jsx)(L.b,{path:"",render:function(){return Object(b.jsx)(K,{})}})]})},Pe=a(231),Qe=a(115),qe=Object(Se.c)({auth:F,form:Pe.a,messagesData:oe}),Ze=Object(Se.e)(qe,Object(Se.d)(Object(Se.a)(Qe.a)));var Ke=function(){return Object(b.jsx)(p.a,{children:Object(b.jsx)(W.a,{store:Ze,children:Object(b.jsxs)("div",{className:d.a.AppWrapper,children:[Object(b.jsx)("div",{className:d.a.AppWrapper__header,children:Object(b.jsx)(S,{})}),Object(b.jsx)("div",{className:d.a.AppWrapper__content,children:Object(b.jsx)(Ge,{})})]})})})},Xe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,232)).then((function(s){var a=s.getCLS,t=s.getFID,r=s.getFCP,n=s.getLCP,c=s.getTTFB;a(e),t(e),r(e),n(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(Ke,{})}),document.getElementById("root")),Xe()},26:function(e,s,a){e.exports={newMessageWrapper:"NewMessage_newMessageWrapper__VgQD2",newMessageWrapper__newMessageField:"NewMessage_newMessageWrapper__newMessageField__3TBQS",error:"NewMessage_error__rwIj_",_edit:"NewMessage__edit__1J4nc",_error:"NewMessage__error__XJr9f",_fieldTextarea:"NewMessage__fieldTextarea__3sWPd"}},27:function(e,s,a){e.exports={messageWrapper:"Message_messageWrapper__1jfy_",messageWrapper__message:"Message_messageWrapper__message__3RUoF",messageWrapper__message_deleted:"Message_messageWrapper__message_deleted__sBJQM",messageWrapper__avatar:"Message_messageWrapper__avatar__3exYV",messageWrapper__name:"Message_messageWrapper__name__2qwu_"}},33:function(e,s,a){e.exports={wrapperInput:"FormsControls_wrapperInput__Odtcw",wrapperInput__formControlsInput:"FormsControls_wrapperInput__formControlsInput__cmDin",fieldInput:"FormsControls_fieldInput__l9aN8",error:"FormsControls_error__1NR49",_error:"FormsControls__error__1ML1y"}},52:function(e,s,a){e.exports={AppWrapper:"App_AppWrapper__1VQ0j",AppWrapper__header:"App_AppWrapper__header__2up5N",AppWrapper__content:"App_AppWrapper__content__4qQv9"}},53:function(e,s,a){e.exports={header:"Header_header__VoiUO",header__logo:"Header_header__logo__32Rwo",header__authInfo:"Header_header__authInfo__dRe4A"}},55:function(e,s,a){e.exports={messagesField:"MessagesField_messagesField__3BiPZ",messagesField__messages:"MessagesField_messagesField__messages__3xMJl",messagesField__newMessage:"MessagesField_messagesField__newMessage__3cX4a"}},56:function(e,s,a){e.exports={wrapper:"Chats_wrapper__1CY02",wrapper_navigationList:"Chats_wrapper_navigationList__2OsTh",wrapper_messagesField:"Chats_wrapper_messagesField__3KTwk"}},57:function(e,s,a){e.exports={chatItem:"ChatItem_chatItem__3RJZW",chatItem__link:"ChatItem_chatItem__link__15VM7",active:"ChatItem_active__2jOei"}},75:function(e,s,a){e.exports={authInfoBar:"AuthInfo_authInfoBar__1oGuG",authUser:"AuthInfo_authUser__1w3NZ"}},79:function(e,s,a){e.exports={loginFormWrapper:"Login_loginFormWrapper__3VvUV",loginFormWrapper__formName:"Login_loginFormWrapper__formName__1u-a3"}},80:function(e,s,a){e.exports={_error:"LoginForm__error__OAKAN",loginButton:"LoginForm_loginButton__HDEXR"}}},[[228,1,2]]]);
//# sourceMappingURL=main.902c504e.chunk.js.map