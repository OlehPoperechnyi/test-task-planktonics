(this.webpackJsonpplanktonics=this.webpackJsonpplanktonics||[]).push([[0],{107:function(e,s,a){e.exports={button:"Button_button__1mfu5"}},108:function(e,s,a){e.exports={avatar:"AvatarImage_avatar__1m-yB"}},110:function(e,s,a){e.exports={contentWrapper:"Content_contentWrapper__2m7iD"}},114:function(e,s,a){e.exports={messagesWrapper:"Messages_messagesWrapper__3L23k"}},115:function(e,s,a){e.exports={chatsList:"ChatsList_chatsList__1IGGo"}},125:function(e,s,a){},17:function(e,s,a){e.exports={userItemWrapper:"InformationAbout_userItemWrapper__1KW8J",userItemWrapper_userDescription:"InformationAbout_userItemWrapper_userDescription__eBb5k",userItemWrapper_userStatus:"InformationAbout_userItemWrapper_userStatus__1Wx79",userItemWrapper_userImage:"InformationAbout_userItemWrapper_userImage__3nqq8",userItemWrapper_userFullName:"InformationAbout_userItemWrapper_userFullName__2ao4i",userItemWrapper_userJobInformation:"InformationAbout_userItemWrapper_userJobInformation__3540X",userItemWrapper_userContacts:"InformationAbout_userItemWrapper_userContacts__U0xmB",userItemWrapper_userLocation:"InformationAbout_userItemWrapper_userLocation__3wPCu",userItemWrapper_userPartners:"InformationAbout_userItemWrapper_userPartners__3gJYw",userItemWrapper_userGoods:"InformationAbout_userItemWrapper_userGoods__1Cqkq",userItemWrapper_userContacts_social:"InformationAbout_userItemWrapper_userContacts_social__wbxwi"}},20:function(e,s,a){e.exports={myMessageWrapper:"MyMessage_myMessageWrapper__2MLkt",myMessageWrapper__message_deleted:"MyMessage_myMessageWrapper__message_deleted__2iFI6",myMessageWrapper__message:"MyMessage_myMessageWrapper__message__3B7-A",myMessageWrapper__editWrapper:"MyMessage_myMessageWrapper__editWrapper__1waO_",myMessageWrapper__editWrapper_edit:"MyMessage_myMessageWrapper__editWrapper_edit__3wJBQ",myMessageWrapper__editWrapper_delete:"MyMessage_myMessageWrapper__editWrapper_delete__1j6JM",_editMode:"MyMessage__editMode__iZntV"}},229:function(e,s,a){"use strict";a.r(s);var t=a(1),r=a.n(t),n=a(50),c=a.n(n),i=(a(125),a(53)),o=a.n(i),d=a(33),m=a(54),_=a.n(m),u=a(76),p=a.n(u),l=a(22),g=a(5),j=a(107),h=a.n(j),b=a(0),I=function(e){return Object(b.jsx)("button",Object(g.a)(Object(g.a)({},e),{},{className:h.a.button,children:e.text}))},O=a(108),f=a.n(O),x=function(e){var s=e.link;return Object(b.jsx)("div",{className:f.a.avatar,children:Object(b.jsx)("img",{src:""===s?"https://banner2.cleanpng.com/20181130/zlz/kisspng-portable-network-graphics-avatar-computer-icons-im-ui-icon-icon-5c0174b58a31f3.0460868615435992855661.jpg":s,alt:"avatar"})})},v=function(e){var s=e.isAuth,a=e.login,t=e.setUserData;return s?Object(b.jsxs)("div",{className:p.a.authInfoBar,children:[Object(b.jsxs)("div",{className:p.a.authUser,children:[Object(b.jsx)(x,{link:""})," ",a]}),Object(b.jsx)(l.b,{to:"",onClick:function(){return t(null,null,null,!1,!1)},children:Object(b.jsx)(I,{text:"Logout"})})]}):Object(b.jsx)(l.b,{to:"",children:Object(b.jsx)(I,{text:"Login"})})},M=function(e){var s=e.isAuth,a=(e.id,e.login),t=Object(d.a)(e,["isAuth","id","login"]);return Object(b.jsxs)("div",{className:_.a.header,children:[Object(b.jsx)("div",{className:_.a.header__logo,children:"Planktonics"}),Object(b.jsx)("div",{className:_.a.header__authInfo,children:Object(b.jsx)(v,{isAuth:s,login:a,setUserData:t.setUserData})})]})},W=a(10),N="SET_USER_DATA",A={id:null,email:null,login:null,isAuth:!1,rememberMe:!1};null!==localStorage.getItem("authState")&&(A=Object(g.a)({},JSON.parse(localStorage.getItem("authState"))));var w=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return{type:N,payload:{id:e,email:s,login:a,isAuth:t,rememberMe:r}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case N:return localStorage.setItem("authState",JSON.stringify(s.payload)),Object(g.a)(Object(g.a)({},e),s.payload);default:return e}},F=Object(W.b)((function(e){return{id:e.auth.id,login:e.auth.login,isAuth:e.auth.isAuth}}),{setUserData:w})(M),S=a(110),C=a.n(S),L=a(9),D=a(17),E=a.n(D),k=a(8),U=a(111),J=a(112),T=a(120),B=a(117),G=function(e){return{isAuth:e.auth.isAuth}},H=function(e){var s=function(s){Object(T.a)(t,s);var a=Object(B.a)(t);function t(){return Object(U.a)(this,t),a.apply(this,arguments)}return Object(J.a)(t,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(e,Object(g.a)({},this.props)):Object(b.jsx)(L.a,{to:""})}}]),t}(r.a.Component);return Object(W.b)(G)(s)},P=Object(k.d)(H)((function(e){return Object(b.jsxs)("div",{className:E.a.userItemWrapper,children:[Object(b.jsx)("div",{className:E.a.userItemWrapper_userImage,children:"image"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userDescription,children:"description"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userStatus,children:"status"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userContacts,children:"contacts"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userFullName,children:"name"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userJobInformation,children:"jobInfo"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userLocation,children:"GOOGLE MAP"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userPartners,children:"PARTNERS"}),Object(b.jsx)("div",{className:E.a.userItemWrapper_userGoods,children:"GOODS"})]})})),R=a(84),V=a(80),q=a.n(V),Q=a(81),K=a.n(Q),X=a(231),Z=a(230),Y=a(34),z=a.n(Y),$=function(e){var s=e.input,a=e.meta,t=a.touched,r=a.error,n=Object(d.a)(e,["input","meta"]),c=r&&t;return Object(b.jsxs)("div",{className:z.a.wrapperInput,children:[Object(b.jsx)("div",{className:z.a.wrapperInput__formControlsInput+" "+(c?z.a.error:""),children:Object(b.jsx)("input",Object(g.a)(Object(g.a)(Object(g.a)({},s),n),{},{className:z.a.fieldInput}))}),c&&Object(b.jsx)("span",{className:z.a.error,children:r})]})},ee=function(e){return e?void 0:"Field is required!"},se=function(e){return function(s){return s&&s.length>e?"Max length ".concat(e," symbols"):void 0}},ae=se(30),te=Object(Z.a)({form:"login"})((function(e){var s=e.handleSubmit,a=e.error;return Object(b.jsxs)("form",{onSubmit:s,children:[Object(b.jsx)("div",{className:K.a._error,children:a&&a}),Object(b.jsx)(X.a,{placeholder:"Login or email",name:"email",component:$,validate:[ee,ae]}),Object(b.jsx)(X.a,{placeholder:"Password",type:"password",name:"password",component:$,validate:[ee,ae]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(X.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me",Object(b.jsx)("div",{className:K.a.loginButton,children:Object(b.jsx)(I,{text:"Login"})})]})]})})),re=function(e){var s=e.isAuth,a=e.onSubmit,t=e.maxLength30;return s?Object(b.jsx)(L.a,{to:"/chats/1"}):Object(b.jsxs)("div",{className:q.a.loginFormWrapper,children:[Object(b.jsx)("div",{className:q.a.loginFormWrapper__formName,children:"Log In"}),Object(b.jsx)(te,{onSubmit:a,maxLength30:t})]})},ne=Object(W.b)((function(e){return{isAuth:e.auth.isAuth}}),{setUserData:w})((function(e){var s=8461,a="test@gmail.com",t="VasiaPupkin",r="qwer1234";return Object(b.jsx)(re,Object(g.a)(Object(g.a)({},e),{},{onSubmit:function(n){var c=n.email,i=n.password,o=n.rememberMe;if(c!==a||i!==r)throw new R.a({_error:"Login or password failed!!!"});e.setUserData(s,a,t,!0,o)}}))})),ce=a(56),ie=a.n(ce),oe=a(119),de=a(118),me="ADD_MESSAGE",_e="EDIT_MESSAGE",ue="SET_MESSAGE_EDIT_MOD",pe="CHANGE_CHAT",le="SET_ACTIVE_MESSAGE",ge={chatsList:{activeChatId:1,chats:[{name:"WorksChat",id:1,avaUrl:"",mediaFiles:[{}]},{name:"flood",id:2,avaUrl:"",mediaFiles:[{}]}]},users:[{userId:21,name:"Andrey",avaUrl:"",mediaFiles:[{}]},{userId:22,name:"Kate",avaUrl:"",mediaFiles:[{}]},{userId:23,name:"Helen",avaUrl:"",mediaFiles:[{}]},{userId:24,name:"Anna",avaUrl:"",mediaFiles:[{}]},{userId:25,name:"Denis",avaUrl:"",mediaFiles:[{}]},{userId:26,name:"Daniil",avaUrl:"",mediaFiles:[{}]},{userId:27,name:"Sergey",avaUrl:"",mediaFiles:[{}]}],editMessageId:0,activeMessageField:"",messages:[{chatId:1,userId:21,message:"Hi!",messageId:1},{chatId:1,userId:21,message:"How are you?",messageId:2},{chatId:2,userId:23,message:"WTF!!!",messageId:3},{chatId:2,userId:23,message:"Sorry",messageId:4},{chatId:1,userId:25,message:"Not for you",messageId:5},{chatId:2,userId:26,message:"I am Helga.",messageId:6},{chatId:2,userId:27,message:"I am fine.",messageId:7},{chatId:1,userId:21,message:"Hi!",messageId:8},{chatId:1,userId:22,message:"How are you?",messageId:9},{chatId:2,userId:22,message:"WTF!!!",messageId:10},{chatId:2,userId:24,message:"Sorry",messageId:11},{chatId:1,userId:24,message:"Not for you",messageId:12},{chatId:2,userId:26,message:"I am Helga.",messageId:13},{chatId:2,userId:27,message:"I am fine.",messageId:14}]};null!==localStorage.getItem("messagesState")&&(ge=Object(g.a)({},JSON.parse(localStorage.getItem("messagesState"))));var je=function(e,s){return{type:_e,message:e,messageId:s}},he=function(e){return{type:ue,editMessageId:e}},be=function(e){return{type:le,message:e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,s=arguments.length>1?arguments[1]:void 0,a=Object(g.a)({},e);switch(s.type){case pe:return a.chatsList=Object(g.a)(Object(g.a)({},e.chatsList),{},{activeChatId:s.chatId}),a;case me:return a.messages=[].concat(Object(de.a)(e.messages),[{chatId:s.chatId,userId:s.userId,message:s.message,messageId:e.messages.length+1}]),localStorage.setItem("messagesState",JSON.stringify(a)),a;case _e:return a.messages=a.messages.map((function(e){return e.messageId===s.messageId?Object(g.a)(Object(g.a)({},e),{},{message:s.message}):e})),localStorage.setItem("messagesState",JSON.stringify(a)),a;case ue:return a=Object(g.a)(Object(g.a)({},e),{},{editMessageId:s.editMessageId}),localStorage.setItem("messagesState",JSON.stringify(a)),a;case le:return a=Object(g.a)(Object(g.a)({},e),{},{activeMessageField:s.message}),localStorage.setItem("messagesState",JSON.stringify(a)),a;default:return a}},Oe=a(27),fe=a.n(Oe),xe=function(e){var s=e.hasError,a=e.onSubmit,t=e.textareaRef,r=e.validation,n=e.activeMessageField,c=e.editMessageId;return Object(b.jsxs)("div",{className:fe.a.newMessageWrapper,children:[Object(b.jsxs)("div",{className:fe.a.newMessageWrapper__newMessageField+" "+(0!==c?fe.a._edit:"")+" "+(s?fe.a.error:""),children:[Object(b.jsx)("textarea",{className:fe.a._fieldTextarea,autoFocus:!0,name:"message",placeholder:"Input your message...",onChange:function(){return r(t.current.value)},ref:t,value:n}),s&&Object(b.jsx)("span",{className:fe.a._error,children:s})]}),s?Object(b.jsx)("div",{children:Object(b.jsx)(I,{disabled:"disabled",text:"send"})}):Object(b.jsx)("div",{onClick:function(){return a(n)},children:Object(b.jsx)(I,{text:"send"})})]})},ve=se(150),Me=r.a.forwardRef((function(e,s){var a=r.a.useState(!1),t=Object(oe.a)(a,2),n=t[0],c=t[1],i=r.a.useRef(null);return Object(b.jsx)(xe,Object(g.a)(Object(g.a)({},e),{},{validation:function(s){c(void 0!==ve(s)&&ve(s)),e.setActiveMessage(s)},onSubmit:function(s){""!==s&&(0===e.editMessageId?e.addMessage(s,e.chatId,e.userId):e.editMessage(s,e.editMessageId)),e.setActiveMessage(""),e.setMessageEditMode(0)},textareaRef:i,hasError:n}))})),We=Object(W.b)((function(e){return{userId:e.auth.id,chatId:e.messagesData.chatsList.activeChatId,editMessageId:e.messagesData.editMessageId,activeMessageField:e.messagesData.activeMessageField}}),{addMessage:function(e,s,a){return{type:me,message:e,chatId:s,userId:a}},setMessageEditMode:he,editMessage:je,setActiveMessage:be})(Me),Ne=a(114),Ae=a.n(Ne),we=function(e){var s=e.messagesMap;return Object(t.useEffect)((function(){var e=document.getElementById("messagesWrapper");e.scrollTop=e.scrollHeight}),[s]),Object(b.jsx)("div",{className:Ae.a.messagesWrapper,id:"messagesWrapper",children:s})},ye=a(20),Fe=a.n(ye),Se=function(e){var s=e.message,a=e.messageId,t=e.editMessage,r=e.editMessageId,n=e.setMessageEditMode,c=e.setActiveMessage;return Object(b.jsx)("div",{className:Fe.a.myMessageWrapper,children:""===s?Object(b.jsx)("div",{className:"".concat(Fe.a.myMessageWrapper__message," ").concat(Fe.a.myMessageWrapper__message_deleted),children:"Message deleted"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"".concat(Fe.a.myMessageWrapper__message,"  ").concat(r===a&&Fe.a._editMode),children:s}),r!==a&&Object(b.jsxs)("div",{className:Fe.a.myMessageWrapper__editWrapper,children:[Object(b.jsx)("span",{className:Fe.a.myMessageWrapper__editWrapper_edit,onClick:function(){n(a),c(s)},children:"edit"}),Object(b.jsx)("span",{className:Fe.a.myMessageWrapper__editWrapper_delete,onClick:function(){t("",a)},children:"delete"})]})]})})},Ce=Object(W.b)((function(e){return{editMessageId:e.messagesData.editMessageId}}),{editMessage:je,setMessageEditMode:he,setActiveMessage:be})(Se),Le=a(28),De=a.n(Le),Ee=function(e){var s=e.message,a=e.user;return Object(b.jsxs)("div",{className:De.a.messageWrapper,children:[Object(b.jsx)("div",{className:De.a.messageWrapper__avatar,children:Object(b.jsx)(x,{link:a.avaUrl})}),Object(b.jsx)("div",{className:De.a.messageWrapper__name,children:a.name}),""===s?Object(b.jsx)("div",{className:"".concat(De.a.messageWrapper__message_deleted," ").concat(De.a.messageWrapper__message),children:"Message deleted"}):Object(b.jsx)("div",{className:De.a.messageWrapper__message,children:s})]})},ke=Object(W.b)((function(e){return{messages:e.messagesData.messages,chatId:e.messagesData.chatsList.activeChatId,userId:e.auth.id,users:e.messagesData.users}}),{})((function(e){var s=e.chatId,a=Object(d.a)(e,["chatId"]),t=a.messages.map((function(e,t){return e.chatId===s?a.userId===e.userId?Object(b.jsx)(Ce,{messageId:e.messageId,message:e.message},t):function(){var s=a.users.map((function(s){return e.userId===s.userId})).indexOf(!0),r=a.users[s];return Object(b.jsx)(Ee,{message:e.message,user:r},t)}():""}));return Object(b.jsx)(we,{messagesMap:t})})),Ue=function(){return Object(b.jsxs)("div",{className:ie.a.messagesField,children:[Object(b.jsx)("div",{className:ie.a.messagesField__messages,children:Object(b.jsx)(ke,{})}),Object(b.jsx)("div",{className:ie.a.messagesField__newMessage,children:Object(b.jsx)(We,{})})]})},Je=a(57),Te=a.n(Je),Be=a(115),Ge=a.n(Be),He=function(e){var s=e.chatsMap;return Object(b.jsx)("div",{className:Ge.a.chatsList,children:s})},Pe=a(58),Re=a.n(Pe),Ve=function(e){var s=e.id,a=e.name,t=e.changeChat;return Object(b.jsx)("div",{className:Re.a.chatItem,children:Object(b.jsx)(l.b,{className:Re.a.chatItem__link,activeClassName:Re.a.active,to:"/chats/"+s,onClick:function(){return t(s)},children:a})})},qe=Object(W.b)((function(e){return{chats:e.messagesData.chatsList.chats}}),{changeChat:function(e){return{type:pe,chatId:e}}})((function(e){var s=e.chats.map((function(s){return Object(b.jsx)(Ve,{changeChat:e.changeChat,name:s.name,id:s.id},s.id)}));return Object(b.jsx)(He,{chatsMap:s})})),Qe=Object(k.d)(H)((function(e){return Object(b.jsxs)("div",{className:Te.a.wrapper,children:[Object(b.jsx)("div",{className:Te.a.wrapper_navigationList,children:Object(b.jsx)(qe,{})}),Object(b.jsx)("div",{className:Te.a.wrapper_messagesField,children:Object(b.jsx)(Ue,{})})]})})),Ke=function(){return Object(b.jsxs)("div",{className:C.a.contentWrapper,children:[Object(b.jsx)(L.b,{path:"/chats/:id",render:function(){return Object(b.jsx)(Qe,{})}}),Object(b.jsx)(L.b,{path:"/info/:id",render:function(){return Object(b.jsx)(P,{})}}),Object(b.jsx)(L.b,{path:"",render:function(){return Object(b.jsx)(ne,{})}})]})},Xe=a(232),Ze=a(116),Ye=Object(k.c)({auth:y,form:Xe.a,messagesData:Ie}),ze=Object(k.e)(Ye,Object(k.d)(Object(k.a)(Ze.a)));var $e=function(){return Object(b.jsx)(l.a,{children:Object(b.jsx)(W.a,{store:ze,children:Object(b.jsxs)("div",{className:o.a.AppWrapper,children:[Object(b.jsx)("div",{className:o.a.AppWrapper__header,children:Object(b.jsx)(F,{})}),Object(b.jsx)("div",{className:o.a.AppWrapper__content,children:Object(b.jsx)(Ke,{})})]})})})},es=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,233)).then((function(s){var a=s.getCLS,t=s.getFID,r=s.getFCP,n=s.getLCP,c=s.getTTFB;a(e),t(e),r(e),n(e),c(e)}))};c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)($e,{})}),document.getElementById("root")),es()},27:function(e,s,a){e.exports={newMessageWrapper:"NewMessage_newMessageWrapper__VgQD2",newMessageWrapper__newMessageField:"NewMessage_newMessageWrapper__newMessageField__3TBQS",error:"NewMessage_error__rwIj_",_edit:"NewMessage__edit__1J4nc",_error:"NewMessage__error__XJr9f",_fieldTextarea:"NewMessage__fieldTextarea__3sWPd"}},28:function(e,s,a){e.exports={messageWrapper:"Message_messageWrapper__1jfy_",messageWrapper__message:"Message_messageWrapper__message__3RUoF",messageWrapper__message_deleted:"Message_messageWrapper__message_deleted__sBJQM",messageWrapper__avatar:"Message_messageWrapper__avatar__3exYV",messageWrapper__name:"Message_messageWrapper__name__2qwu_"}},34:function(e,s,a){e.exports={wrapperInput:"FormsControls_wrapperInput__Odtcw",wrapperInput__formControlsInput:"FormsControls_wrapperInput__formControlsInput__cmDin",fieldInput:"FormsControls_fieldInput__l9aN8",error:"FormsControls_error__1NR49",_error:"FormsControls__error__1ML1y"}},53:function(e,s,a){e.exports={AppWrapper:"App_AppWrapper__1VQ0j",AppWrapper__header:"App_AppWrapper__header__2up5N",AppWrapper__content:"App_AppWrapper__content__4qQv9"}},54:function(e,s,a){e.exports={header:"Header_header__VoiUO",header__logo:"Header_header__logo__32Rwo",header__authInfo:"Header_header__authInfo__dRe4A"}},56:function(e,s,a){e.exports={messagesField:"MessagesField_messagesField__3BiPZ",messagesField__messages:"MessagesField_messagesField__messages__3xMJl",messagesField__newMessage:"MessagesField_messagesField__newMessage__3cX4a"}},57:function(e,s,a){e.exports={wrapper:"Chats_wrapper__1CY02",wrapper_navigationList:"Chats_wrapper_navigationList__2OsTh",wrapper_messagesField:"Chats_wrapper_messagesField__3KTwk"}},58:function(e,s,a){e.exports={chatItem:"ChatItem_chatItem__3RJZW",chatItem__link:"ChatItem_chatItem__link__15VM7",active:"ChatItem_active__2jOei"}},76:function(e,s,a){e.exports={authInfoBar:"AuthInfo_authInfoBar__1oGuG",authUser:"AuthInfo_authUser__1w3NZ"}},80:function(e,s,a){e.exports={loginFormWrapper:"Login_loginFormWrapper__3VvUV",loginFormWrapper__formName:"Login_loginFormWrapper__formName__1u-a3"}},81:function(e,s,a){e.exports={_error:"LoginForm__error__OAKAN",loginButton:"LoginForm_loginButton__HDEXR"}}},[[229,1,2]]]);
//# sourceMappingURL=main.23a416fb.chunk.js.map